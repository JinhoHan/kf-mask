(this["webpackJsonpkf-mask"]=this["webpackJsonpkf-mask"]||[]).push([[0],{31:function(e,t,a){e.exports=a(59)},36:function(e,t,a){},37:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){},56:function(e,t,a){},57:function(e,t,a){},59:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),o=a(15),c=a.n(o),r=(a(36),a(6)),i=a(7),l=a(8),m=a(9),_=a(14),d=(a(37),function(e){Object(m.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).acceptLocationCheck=function(t){var a=e.props.getAcceptLocationInformation;if(!window.confirm("\uc704\uce58\uc815\ubcf4\ud655\uc778\uc5d0 \ub3d9\uc758\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"))return t.preventDefault(),void a(!1);a(!0)},e}return Object(i.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"accept__box"},s.a.createElement("div",{className:"accept__content"},s.a.createElement("div",{className:"accept__text"},"\ub0b4 \uc8fc\ubcc0 \ub9c8\uc2a4\ud06c\ub294 \uc5b4\ub514\uc5d0?"),s.a.createElement("div",null,s.a.createElement(_.b,{id:"accept__button",className:"accept__button",onClick:this.acceptLocationCheck,to:"/list"},"\uc704\uce58\uc815\ubcf4\ub3d9\uc758"))))}}]),a}(s.a.Component)),u=a(22),p=(a(43),a(44),a(60)),k=a(61),g=a(67),v=a(62),h=a(63),f=a(64),E=function(e){var t=e.getGeoLocation,a=e.getAddressToGeoLocation,o=e.address,c=e.distance,r=e.getDistanceToUser,i=Object(n.useState)(!1),l=Object(u.a)(i,2),m=l[0],d=l[1],E=function(){d(!m)},L=Object(n.useState)(c),b=Object(u.a)(L,2),w=b[0],y=b[1];return s.a.createElement(s.a.Fragment,null,s.a.createElement(p.a,{className:"navbar fixed-top navbar-light bg-light white"},s.a.createElement("div",{className:"header__title"},s.a.createElement("div",{id:"my__location",className:"header__text",onClick:function(){new window.daum.Postcode({oncomplete:function(e){var t=e.roadAddress;(new kakao.maps.services.Geocoder).addressSearch(e.roadAddress,(function(e,n){if(n===kakao.maps.services.Status.OK){var s={coords:{latitude:e[0].y,longitude:e[0].x},roadAddress:t};a(s)}}))}}).open()}},null!==o?o:"\ub0b4 \uc704\uce58"),s.a.createElement("div",{className:"gps__button",onClick:function(){return t()}},s.a.createElement("img",{className:"gps__icon",src:"https://k.kakaocdn.net/dn/bkl7up/btqC48UZVoy/iu1sMcCNmjuYAlZ4zW8qHK/img.png",alt:""}))),s.a.createElement("div",{className:"user__custom__button__box"},s.a.createElement(_.b,{className:"btn btn-sm btn-primary user__toggle__button",to:"/list"},"\ubaa9\ub85d\ubcf4\uae30"),s.a.createElement(_.b,{className:"btn btn-sm btn-danger user__toggle__button",to:"/map"},"\uc9c0\ub3c4\ubcf4\uae30"),s.a.createElement(k.a,{className:"user__custom__button btn-sm filter",onClick:E},"\ud544\ud130\xa0",s.a.createElement("svg",{className:"bi bi-filter",width:"1.5em",height:"1.5em",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},s.a.createElement("path",{fillRule:"evenodd",d:"M2 10.5a.5.5 0 01.5-.5h3a.5.5 0 010 1h-3a.5.5 0 01-.5-.5zm0-3a.5.5 0 01.5-.5h7a.5.5 0 010 1h-7a.5.5 0 01-.5-.5zm0-3a.5.5 0 01.5-.5h11a.5.5 0 010 1h-11a.5.5 0 01-.5-.5z",clipRule:"evenodd"}))))),s.a.createElement(g.a,{className:"user__modal",returnFocusAfterClose:!1,isOpen:m,fade:!1},s.a.createElement(v.a,null,"\ub0b4 \uc8fc\ubcc0 \ub9c8\uc2a4\ud06c\ub294 \uc5b4\ub514\uc5d0?"),s.a.createElement(h.a,null,s.a.createElement("div",null,s.a.createElement("div",{className:"user__select__distance__title"},"\uac80\uc0c9 \ubc18\uacbd"),s.a.createElement("div",{className:"user__select__distance__box"},s.a.createElement("select",{id:"user__select__distance__selected",className:"btn btn-outline-secondary btn-lg user__select__distance__selected",value:w,onChange:function(e){var t=e.target.value;y(t*=1)}},s.a.createElement("option",{className:"",value:"1000"},"1km"),s.a.createElement("option",{className:"",value:"2000"},"2km"),s.a.createElement("option",{className:"",value:"5000"},"5km"))))),s.a.createElement(f.a,null,s.a.createElement(k.a,{color:"primary",onClick:function(){E(),r(w)}},"\uc644\ub8cc"))))},L=(a(52),a(65)),b=a(66),w=function(e){Object(m.a)(a,e);var t=Object(l.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.geo,a=e.item,n=e.getDistanceFromLatLonInKm,o=e.handleClick,c=a.name,r=a.addr,i=a.remain_stat,l=a.stock_at,m=a.lat,_=a.lng;return s.a.createElement("div",{className:"card__item__box ".concat(i)},s.a.createElement(L.a,{className:"card__item__innerbody ".concat(i),onClick:function(){return o(a)}},s.a.createElement("div",{className:"mask__store__header"},s.a.createElement(b.a,{className:"mask__store__name ".concat(i)},c),s.a.createElement(b.a,{className:"mask__store__distance"},n(t[0],t[1],m,_)," km")),s.a.createElement(b.a,{className:"mask__store__addr ".concat(i)},r),s.a.createElement(b.a,{className:"mask__store__remain ".concat(i)},s.a.createElement("div",{className:"mask__store__remain__color ".concat(i)}),s.a.createElement("div",{className:"mask__store__remain__text"},"\uc7ac\uace0 :","plenty"===i?" 100\uac1c \uc774\uc0c1":"some"===i?" 30\uac1c \uc774\uc0c1 100\uac1c\ubbf8\ub9cc":"few"===i?" 2\uac1c \uc774\uc0c1 30\uac1c \ubbf8\ub9cc":"empty"===i?" 1\uac1c \uc774\ud558":" \ud310\ub9e4\uc911\uc9c0")),s.a.createElement(b.a,{className:"mask__store__stock ".concat(null===l?"none_stock":"ok_stock"," ").concat(i)},"\uc785\uace0\uc2dc\uac04 : ",null===l?"\uc785\uace0\uc815\ubcf4\uc5c6\uc74c":l)))}}]),a}(s.a.Component),y=(a(53),function(e){Object(m.a)(a,e);var t=Object(l.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.geo,a=e.items,n=e.getDistanceFromLatLonInKm,o=e.handleClick,c=a.map((function(e){return s.a.createElement(w,{geo:t,item:e,key:e.code,getDistanceFromLatLonInKm:n,handleClick:o})}));return s.a.createElement("div",{className:"item__list"},c)}}]),a}(s.a.Component)),I=(a(54),a(55),function(e){Object(m.a)(a,e);var t=Object(l.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.lat,a=e.lng,n=e.name,s=document.getElementById("map"),o={center:new kakao.maps.LatLng(t,a),level:4},c=new kakao.maps.Map(s,o),r=new kakao.maps.LatLng(t,a),i=new kakao.maps.Size(40,44),l=new kakao.maps.MarkerImage("https://t1.daumcdn.net/localimg/localimages/07/mapapidoc/marker_red.png",i,null),m=new kakao.maps.Marker({position:r,image:l});m.setMap(c);var _=document.createElement("div");_.className="user__custom__overlay";var d="";d+='<a href="https://map.kakao.com/link/map/'+(n+","+t+","+a)+'" target="_blank">',d+='<span class="title">'+n+"</span>",d+="</a>",_.innerHTML=d;var u=m.getPosition();new kakao.maps.CustomOverlay({map:c,position:u,content:_,yAnchor:.3})}},{key:"render",value:function(){var e=this.props,t=e.geo,a=e.name,n=e.addr,o=e.remain_stat,c=e.stock_at,r=e.lat,i=e.lng,l=e.getDistanceFromLatLonInKm;return s.a.createElement("div",null,s.a.createElement(L.a,{className:"innerbody__ user__selected__item"},s.a.createElement(b.a,{className:"user__selected__mask__store__name"},a),s.a.createElement(b.a,{className:"distance__ user__selected__item"},l(t[0],t[1],r,i)," km"),s.a.createElement(b.a,{className:"user__selected__mask__addr"},n),s.a.createElement(b.a,{className:"user__selected__mask__remain"},s.a.createElement("div",{className:"user__selected__mask__remain__color"}),s.a.createElement("div",{className:"user__selected__mask__remain__text"},"\uc7ac\uace0 :","plenty"===o?" 100\uac1c \uc774\uc0c1":"some"===o?" 30\uac1c \uc774\uc0c1 100\uac1c\ubbf8\ub9cc":"few"===o?" 2\uac1c \uc774\uc0c1 30\uac1c \ubbf8\ub9cc":"empty"===o?" 1\uac1c \uc774\ud558":" \ud310\ub9e4\uc911\uc9c0")),s.a.createElement(b.a,{className:"user__selected__mask__stock"},"\uc785\uace0\uc2dc\uac04 : ",null===c?"\uc785\uace0\uc815\ubcf4\uc5c6\uc74c":c)),s.a.createElement(L.a,{id:"map",className:"kakao__map"}))}}]),a}(s.a.Component)),N=function(e){Object(m.a)(a,e);var t=Object(l.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.geo,a=e.selectedItemInTheList,n=e.getDistanceFromLatLonInKm,o=e.handleRemove;return s.a.createElement("div",null,s.a.createElement("div",{className:"user__selected__item__detail__overlay show",onClick:o}),s.a.createElement("div",{className:"user__selected__item__detail show"},s.a.createElement(I,{geo:t,name:a.name,addr:a.addr,remain_stat:a.remain_stat,stock_at:a.stock_at,lat:a.lat,lng:a.lng,id:a.code,key:a.code,getDistanceFromLatLonInKm:n})))}}]),a}(s.a.Component),O=(a(56),a(57),function(e){Object(m.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).getKakaoMapMarkers=function(){var t=null,a=null,n=e.props,s=n.geo,o=n.items,c=n.getDistanceFromLatLonInKm,r=s[0],i=s[1],l=document.getElementById("map__List"),m={center:new kakao.maps.LatLng(r,i),level:4},_=new kakao.maps.Map(l,m),d=new kakao.maps.LatLng(r,i),u=new kakao.maps.Size(32,34),p={offset:new kakao.maps.Point(27,69)},k=new kakao.maps.MarkerImage("https://t1.daumcdn.net/localimg/localimages/07/mapapidoc/marker_red.png",u,p);new kakao.maps.Marker({map:_,position:d,image:k});for(var g=o,v=new kakao.maps.Size(32,34),h=new kakao.maps.MarkerImage("https://t1.daumcdn.net/mapjsapi/images/2x/marker.png",v,null),f=function(e){var n=new kakao.maps.LatLng(e.lat,e.lng),o=new kakao.maps.Marker({map:_,position:n,image:h}),r=new kakao.maps.CustomOverlay({yAnchor:.7,zIndex:3,map:_,position:n}),i=e.name+","+e.lat+","+e.lng,l="";l+='<div class="item__map__list__box size__300">',l+='<a class="kakao__map__open" href="https://map.kakao.com/link/map/'+i+'" target="_blank">',l+="",l+="</a>",l+='<div id="size__85__per" class="item__map__list__item '+e.remain_stat+' size__85__per">',l+='<div class="item__map__list__innerbody '+e.remain_stat+' card left__only__round">',l+='<div class="item__map__list__store__">',l+='<div class="item__map__list__store__name '+e.remain_stat+' card__title">',l+=e.name,l+="</div>",l+='<div class="item__map__list__store__distance card__title">',l+=c(s[0],s[1],e.lat,e.lng)+" km",l+="</div>",l+="</div>",l+='<div class="item__map__list__store__addr '+e.remain_stat+' card__title">',l+=e.addr,l+="</div>",l+='<div class="item__map__list__store__remain '+e.remain_stat+' card__title">',l+='<div class="item__map__list__store__remain__color '+e.remain_stat+'"></div>',l+='<div class="item__map__list__store__remain__text">',l+="\uc7ac\uace0 : "+("plenty"===e.remain_stat?" 100\uac1c \uc774\uc0c1":"some"===e.remain_stat?" 30\uac1c \uc774\uc0c1 100\uac1c\ubbf8\ub9cc":"few"===e.remain_stat?" 2\uac1c \uc774\uc0c1 30\uac1c \ubbf8\ub9cc":"empty"===e.remain_stat?" 1\uac1c \uc774\ud558":" \ud310\ub9e4\uc911\uc9c0"),l+="</div>",l+="</div>",l+='<div class="item__map__list__store__stock '+e.remain_stat+" card__title "+(null===e.stock_at?"none_stock":"ok_stock")+'">',l+="\uc785\uace0\uc2dc\uac04 : "+(null===e.stock_at?"\uc785\uace0\uc815\ubcf4\uc5c6\uc74c":e.stock_at),l+="</div>",l+="</div>",l+="</div>",l+="</div>",kakao.maps.event.addListener(o,"click",(function(){t&&t===o||(t&&a.setMap(null),r.setContent(l),r.setMap(_),t=o,a=r),document.getElementById("size__85__per").onclick=function(){a.setMap(null),a=null,t=null}}))},E=0;E<g.length;E++)f(g[E])},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.getKakaoMapMarkers()}},{key:"render",value:function(){return s.a.createElement("div",{className:"item__map__list"},s.a.createElement("div",{id:"map__List"}))}}]),a}(s.a.Component)),j=a(13),M=function(e){Object(m.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).getGeoLocation=function(){navigator.geolocation?(n.setState({address:null}),navigator.geolocation.getCurrentPosition(n.handleSuccess,n.handleError)):alert("\ud604\uc7ac \uc704\uce58 \ucc3e\uae30\ub97c \uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ube0c\ub77c\uc6b0\uc800 \uc785\ub2c8\ub2e4. \ud639\uc740 \uc124\uc815\uc5d0\uc11c \uc704\uce58\uc815\ubcf4 \uc811\uadfc \uad8c\ud55c\uc744 \ud5c8\uc6a9\ud574\uc8fc\uc138\uc694!")},n.handleError=function(e){alert("\ud604\uc7ac \uc704\uce58\ub97c \ubc1b\uc544\uc624\ub294\ub370 \uc2e4\ud328\ud558\uc600\uc2b5\ub2c8\ub2e4")},n.handleSuccess=function(e){if(null!==e){var t=[e.coords.latitude,e.coords.longitude];n.setState({geo:t})}var a="https://8oi9s0nnth.apigw.ntruss.com/corona19-masks/v1/storesByGeo/json?lat="+n.state.geo[0]+"&lng="+n.state.geo[1]+"&m="+n.state.distance;fetch(a).then((function(e){if(!e.ok)throw new Error(e.status);return e.json()})).then((function(e){return n.setState({items:e.stores})})).catch((function(e){return console.log(e)}))},n.getDistanceFromLatLonInKm=function(e,t,a,s){var o=n.getDegreesToRadians(a-e),c=n.getDegreesToRadians(s-t),r=Math.sin(o/2)*Math.sin(o/2)+Math.cos(n.getDegreesToRadians(e))*Math.cos(n.getDegreesToRadians(a))*Math.sin(c/2)*Math.sin(c/2),i=6371*(2*Math.atan2(Math.sqrt(r),Math.sqrt(1-r)));return i=i.toFixed(2)},n.getDegreesToRadians=function(e){return e*(Math.PI/180)},n.handleClick=function(e){n.setState({selectedItemInTheList:e})},n.handleRemove=function(){n.setState({selectedItemInTheList:null})},n.getAcceptLocationInformation=function(e){console.log(e),!0===e&&n.setState({acceptLocationInformation:e},(function(e){n.getGeoLocation()}))},n.getAddressToGeoLocation=function(e){null!==e&&(n.setState({address:e.roadAddress}),n.handleSuccess(e))},n.getDistanceToUser=function(e){if(n.state.distance!==e){var t=1*e;n.setState({distance:t},(function(e){n.handleSuccess(null)}))}},n.state={geo:[],address:[],distance:1e3,items:[],selectedItemInTheList:null,selectedItemOnTheMap:null,acceptLocationInformation:!0},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.state.acceptLocationInformation&&this.getGeoLocation()}},{key:"render",value:function(){var e=this;return s.a.createElement(_.a,{basename:"/kf-mask"},s.a.createElement(j.c,null,this.state.acceptLocationInformation&&s.a.createElement(j.a,{path:"/list",component:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(E,{geo:e.state.geo,distance:e.state.distance,address:e.state.address,getGeoLocation:e.getGeoLocation,getAddressToGeoLocation:e.getAddressToGeoLocation,getDistanceToUser:e.getDistanceToUser}),s.a.createElement(y,{geo:e.state.geo,items:e.state.items,getDistanceFromLatLonInKm:e.getDistanceFromLatLonInKm,handleClick:e.handleClick}),e.state.selectedItemInTheList&&s.a.createElement(N,{geo:e.state.geo,selectedItemInTheList:e.state.selectedItemInTheList,getDistanceFromLatLonInKm:e.getDistanceFromLatLonInKm,handleRemove:e.handleRemove}))}}),this.state.acceptLocationInformation&&s.a.createElement(j.a,{path:"/map",component:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(E,{geo:e.state.geo,distance:e.state.distance,address:e.state.address,getGeoLocation:e.getGeoLocation,getAddressToGeoLocation:e.getAddressToGeoLocation,getDistanceToUser:e.getDistanceToUser}),s.a.createElement(O,{geo:e.state.geo,items:e.state.items,getDistanceFromLatLonInKm:e.getDistanceFromLatLonInKm}))}}),s.a.createElement(j.a,{path:"/",component:function(){return s.a.createElement(d,{getAcceptLocationInformation:e.getAcceptLocationInformation})}})))}}]),a}(s.a.Component);a(58),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(M,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[31,1,2]]]);
//# sourceMappingURL=main.db20fc7d.chunk.js.map